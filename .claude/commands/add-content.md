---
description: 외국어 학습 콘텐츠를 자동으로 생성합니다
argument-hint: "[language] [difficulty]"
---

# 외국어 학습 콘텐츠 자동 생성

랜덤한 주제로 완전한 4단계 외국어 학습 콘텐츠를 자동 생성합니다.

## 매개변수

- `$1` (language): `en` (기본값), `ja`
- `$2` (difficulty): `초급` (기본값), `중급`, `고급`

## 사용 예시
- `/add-content` - 영어 초급 콘텐츠 생성
- `/add-content en 중급` - 영어 중급 콘텐츠 생성
- `/add-content ja 초급` - 일본어 초급 콘텐츠 생성

## 작업 프로세스

1. **랜덤 주제 선택**: 회화에 핵심적인 외국어 표현이 포함된 실용적 상황 중 자동 선택
2. **UUID 생성**: 매번 새로운 고유한 UUID 생성 (중복 방지 필수)
3. **메타데이터 설정**: 카테고리는 랜덤, 난이도와 언어는 매개변수로 설정
4. **파일명 생성**: 주제에 맞는 영어 slug 형식 파일명 생성 (모든 언어 공통)
5. **콘텐츠 생성**: @docs/content/content-creation-flow.md 기반으로 완전한 4단계 학습 콘텐츠 작성
6. **파일 저장**: @content/source/ 디렉토리에 마크다운 파일로 저장
7. **파싱 실행**: content-parser로 마크다운을 JSON으로 변환 및 Supabase 업로드
8. **커밋 생성**: 생성된 콘텐츠와 JSON 파일을 포함한 일관된 커밋 메시지 작성

## 주제 풀

회화 단계에서 핵심 표현들이 구성된 실용적 상황들을 포괄적으로 포함합니다.

### 지원 언어
- **English**: 영어 학습 콘텐츠
- **Japanese**: 일본어 학습 콘텐츠 (향후 지원 예정)

## 매개변수 처리 로직

### 언어 처리 ($1)
- **기본값**: `en` (매개변수가 없을 때)
- **허용값**: `en`, `ja`
- **처리**:
  - `$1` 값을 `language_code` 필드에 저장
  - 해당 언어에 맞는 번역 콘텐츠 생성
  - 파일명은 모든 언어 공통으로 영어 slug 사용

### 난이도 처리 ($2)
- **기본값**: `초급` (매개변수가 없을 때)
- **허용값**: `초급`, `중급`, `고급`
- **처리**:
  - `$2` 값으로 난이도에 따른 어휘 수준 조절
  - 문장 구조 복잡도 조정
  - 키워드 스피치 난이도 설정

### 콘텐츠 생성 시 고려사항
- **초급**: 기본 어휘, 단순 문장구조, 일상 상황 (5-10문장)
- **중급**: 비즈니스 어휘, 복합 문장구조, 업무 상황 (5-10문장)
- **고급**: 전문 어휘, 고급 문법, 추상적 주제 (5-10문장)


## 생성되는 콘텐츠 구조

```markdown
---
topic_id: "[UUID 형식]"
title: "[자동 생성된 주제명]"
category: "[랜덤 카테고리]"
difficulty: "[$2 값 또는 기본값 '초급']"
description: "[주제에 맞는 설명]"
language_code: "[$1 값 또는 기본값 'en']"
highlight_sentence:
  sentence_order: [핵심 문장 순서]
  korean_text: "[핵심 한글 문장]"
  foreign_text: "[핵심 외국어 문장]"
  reason: "[핵심인 이유]"
---

# 1단계: 한글 스크립트
[5-10문장의 자연스러운 한글 스크립트]
[**핵심표현**{외국어번역} 형식의 학습 포인트 포함]

# 2단계: 외국어 스크립트
[자연스러운 외국어 번역]

# 2단계: 끊어읽기 버전
[| 기호가 포함된 끊어읽기 버전]

# 3단계: 사용자 자유 연습
1 ~ 2단계에서 구성한 콘텐츠 기반으로 한→외국어 스피킹 연습 진행

# 4단계: 키워드 스피치

## 레벨 1: 상세한 키워드 (70% 정보)
[키워드1, 키워드2, 키워드3 → 목표 문장]

## 레벨 2: 핵심 키워드 (50% 정보)
[키워드1, 키워드2 → 목표 문장]

## 레벨 3: 최소한의 키워드 (30% 정보)
[키워드1 → 목표 문장]

## 레벨 4: 외국어 키워드
[외국어 키워드 → 목표 문장]
```

## 생성 규칙

### 학습 포인트 표시
- 문장당 0-2개의 핵심 표현 선별 (없으면 생략 가능)
- `**한글표현**{외국어표현}` 형식으로 마크업
- 외국어 표현은 해당 문장의 외국어 번역과 정확히 일치
- **반드시 회화에서 재사용 가능한 의미 있는 표현만 선별**

#### 학습 포인트 선별 기준
✅ **포함해야 할 표현들**:
- 관용어, 숙어, 패턴 표현
- 비즈니스/일상 회화의 핵심 구문
- 동사구, 전치사구 등 덩어리 표현
- 상황별 전문 용어

❌ **제외해야 할 표현들**:
- 고유명사, 브랜드명, 개인정보 (예: "ABC123456", "삼성", "김철수")
- 단순 명사나 숫자 (예: "노트북", "3개", "어제")
- 문맥에 의존적인 일회성 표현
- 너무 당연하거나 기본적인 단어 (예: "안녕하세요", "감사합니다")

### 끊어읽기 규칙  
- 의미 단위별로 `|` 기호 삽입
- 긴 문장의 경우 `||` 기호로 긴 호흡 표시
- 자연스러운 발음을 위한 적절한 pause 위치

### 키워드 스피치 생성 원칙
- **품질 우선**: 억지로 분량을 맞추지 말고 의미 있는 키워드만 선별
- **레벨별 차별화**: 각 레벨마다 명확한 학습 목적과 난이도 차이 구현
- **실용성 중심**: 실제 회화에서 활용 가능한 핵심 표현 위주
- **유연한 구성**: 레벨별 1-3개 항목으로 구성, 무리한 분량 채우기 금지

## 품질 보장
- **문장 수 적정성**: 5-10문장으로 학습 부담 최소화
- **학습 포인트 매칭**: 외국어 스크립트와 정확한 일치 검증
- **자연스러운 대화 흐름**: 실제 상황에서 사용 가능한 맥락
- **난이도별 어휘 선택**: 각 난이도에 적합한 표현 수준
- **키워드 스피치 품질**: 분량보다 학습 효과 우선
- **4단계 학습 시스템**: 한글→외국어→끊어읽기→자유연습→키워드스피치

## 자동 파싱 및 업로드

콘텐츠 생성 완료 후 자동으로 다음 단계가 진행됩니다:

### Content Parser 실행
```bash
cd packages/content-parser
pnpm run parse [생성된파일명].md
```

### 처리 결과
- **JSON 생성**: `@content/json/[파일명].json` 파일 자동 생성
- **Supabase 업로드**: 6개 테이블에 데이터 자동 삽입
  - `topics`: 주제 메타데이터
  - `korean_scripts`: 한글 스크립트
  - `foreign_scripts`: 외국어 스크립트 + 끊어읽기
  - `keyword_speeches`: 4단계 키워드 스피치 (레벨 1-4)
  - `learning_points`: 학습 포인트 매핑
  - `highlight_sentences`: 핵심 문장 (frontmatter에서 추출)

### 자동 커밋 메시지 형식
```
content: [생성된 문서 제목] ($1 $2)

예시:
content: 카페에서 음료 주문하기 (en 초급)
content: 회의실 예약 및 협업 (ja 중급)
```

## 품질 검증

### 자동 검증 항목
- ✅ UUID 형식 유효성 검사 및 고유성 보장 (매번 새로운 UUID 생성)
- ✅ 프론트매터 필수 필드 확인 (`language_code` 포함)
- ✅ 한글/외국어 스크립트 문장 수 일치 (5-10문장)
- ✅ 매개변수 기반 난이도 및 언어 설정 확인
- ✅ 언어별 문법 및 어휘 수준 적정성 검증
- ✅ 학습 포인트 외국어 표현 매칭
- ✅ 키워드 스피치 품질 우선 검증 (분량보다 학습 효과)
- ✅ highlight_sentence frontmatter 구조 검증

### 중요 주의사항
**UUID 생성**: topic_id는 매번 새로운 고유한 UUID여야 합니다. 절대 고정값이나 중복값을 사용하지 마세요. 기존에 생성된 콘텐츠와의 중복을 피하기 위해 실제 UUID 생성 함수나 도구를 사용하여 매번 새로운 값을 생성해야 합니다.

### 생성 완료 확인
- [ ] 마크다운 파일 생성 (`@content/source/`)
- [ ] JSON 파일 생성 (`@content/json/`)
- [ ] Supabase 데이터 업로드 확인
- [ ] Git 커밋 메시지 작성 완료

생성된 파일은 @content/source/ 디렉토리에 저장되고, 자동으로 파싱 및 데이터베이스 업로드가 완료됩니다.
